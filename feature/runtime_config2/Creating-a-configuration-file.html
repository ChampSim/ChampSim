<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Creating a Configuration File &#8212; ChampSim  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/nature.css?v=601dbdee" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Configuration API" href="Configuration-API.html" />
    <link rel="prev" title="Module Support Library" href="Module-support-library.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Configuration-API.html" title="Configuration API"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Module-support-library.html" title="Module Support Library"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ChampSim  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Creating a Configuration File</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="creating-a-configuration-file">
<span id="creating-config"></span><h1>Creating a Configuration File<a class="headerlink" href="#creating-a-configuration-file" title="Link to this heading">¶</a></h1>
<p>The configuration file is a central fixture of the ChampSim build system.
An example configuration file (champsim_config.json) is given in the root of the repository, but it is large and unwieldy.
Your configuration file will likely be much smaller.
This page will walk you through many of the features of the ChampSim configuration system.</p>
<p>The configuration file is given as an input to the configuration script as below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">config</span><span class="o">.</span><span class="n">sh</span> <span class="n">my_config</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>In fact, the configuration file is entirely optional.
Not specifying any file will configure ChampSim with a default configuration.</p>
<section id="your-first-configuration-file">
<h2>Your first configuration file<a class="headerlink" href="#your-first-configuration-file" title="Link to this heading">¶</a></h2>
<p>All ChampSim configuration files are JSON files.
We can start with the most trivial of configuration files.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This would specify a default configuration.
But, this is not frequently useful.
Let’s change the branch predictor that ChampSim uses.
Legal values for the <code class="docutils literal notranslate"><span class="pre">branch_predictor</span></code> key are directory names under the <code class="docutils literal notranslate"><span class="pre">branch/</span></code> directory, or valid paths.
The same is true for specifying BTBs in the core and both prefetchers and replacement policies in the cache.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;branch_predictor&quot;</span><span class="p">:</span> <span class="s2">&quot;perceptron&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This configuration file will configure ChampSim with a default configuration, but with a perceptron branch predictor instead.
We can take this further and specify many things about our single-core system.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;branch_predictor&quot;</span><span class="p">:</span> <span class="s2">&quot;perceptron&quot;</span><span class="p">,</span>

    <span class="s2">&quot;rob_size&quot;</span><span class="p">:</span> <span class="mi">226</span><span class="p">,</span> <span class="s2">&quot;lq_size&quot;</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span> <span class="s2">&quot;sq_size&quot;</span><span class="p">:</span> <span class="mi">85</span><span class="p">,</span>
    <span class="s2">&quot;fetch_width&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s2">&quot;decode_width&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s2">&quot;lq_width&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;sq_width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>

    <span class="s2">&quot;decode_latency&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;execute_latency&quot;</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Each of these options will specify something about our core. Next, we’ll specify some of our caches.</p>
</section>
<section id="cache-configuration">
<h2>Cache Configuration<a class="headerlink" href="#cache-configuration" title="Link to this heading">¶</a></h2>
<p>We can begin by changing some features of our L1 data cache.
We can specify its size based on the block size, the number of sets, and the number of ways.
The following configuration file specifies a 64 KiB L1 data cache.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;block_size&quot;</span><span class="p">:</span> <span class="mi">64</span><span class="p">,</span>
    <span class="s2">&quot;L1D&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;sets&quot;</span><span class="p">:</span> <span class="mi">256</span><span class="p">,</span> <span class="s2">&quot;ways&quot;</span><span class="p">:</span> <span class="mi">4</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that 64 is the default block size, specified here for clarity.
The default prefetcher is the do-nothing prefetcher, and the default replacement policy is LRU, but they can be specified, too.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;L1D&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;sets&quot;</span><span class="p">:</span> <span class="mi">256</span><span class="p">,</span> <span class="s2">&quot;ways&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="s2">&quot;prefetcher&quot;</span><span class="p">:</span> <span class="s2">&quot;next_line&quot;</span><span class="p">,</span>
        <span class="s2">&quot;replacement&quot;</span><span class="p">:</span> <span class="s2">&quot;../../my/repl/path&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Specifying a cache this way will create an identical L1D for each core in the configuration.
So far, we’ve only handled the single-core case.</p>
</section>
<section id="multi-core-configurations">
<h2>Multi-core configurations<a class="headerlink" href="#multi-core-configurations" title="Link to this heading">¶</a></h2>
<p>Multi-core simulations can be enabled by specifying the <code class="docutils literal notranslate"><span class="pre">num_cores</span></code> key.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;num_cores&quot;</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This will create two identical cores with default configurations.
This can be combined with the other specifications that we have made so far to create identical cores.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;num_cores&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;branch_predictor&quot;</span><span class="p">:</span> <span class="s2">&quot;perceptron&quot;</span><span class="p">,</span>

    <span class="s2">&quot;rob_size&quot;</span><span class="p">:</span> <span class="mi">190</span><span class="p">,</span>

    <span class="s2">&quot;L1D&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;sets&quot;</span><span class="p">:</span> <span class="mi">256</span><span class="p">,</span> <span class="s2">&quot;ways&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="s2">&quot;prefetcher&quot;</span><span class="p">:</span> <span class="s2">&quot;next_line&quot;</span><span class="p">,</span>
        <span class="s2">&quot;replacement&quot;</span><span class="p">:</span> <span class="s2">&quot;drrip&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="heterogeneous-systems">
<h2>Heterogeneous systems<a class="headerlink" href="#heterogeneous-systems" title="Link to this heading">¶</a></h2>
<p>ChampSim supports a variety of system configurations, including systems that are not homogeneous.
For example, we could create two cores with different ROB sizes.
Specify all cores in a list under the <code class="docutils literal notranslate"><span class="pre">ooo_cpu</span></code> key.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;num_cores&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;ooo_cpu&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="s2">&quot;rob_size&quot;</span><span class="p">:</span> <span class="mi">120</span> <span class="p">},</span>
        <span class="p">{</span> <span class="s2">&quot;rob_size&quot;</span><span class="p">:</span> <span class="mi">240</span> <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Each object in the <code class="docutils literal notranslate"><span class="pre">ooo_cpu</span></code> list specifies one core, and takes all of the options that we have discussed so far.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;num_cores&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;ooo_cpu&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;branch_predictor&quot;</span><span class="p">:</span> <span class="s2">&quot;bimodal&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rob_size&quot;</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span> <span class="s2">&quot;lq_size&quot;</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span>
            <span class="s2">&quot;L1D&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;prefetcher&quot;</span><span class="p">:</span> <span class="s2">&quot;next_line&quot;</span> <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;branch_predictor&quot;</span><span class="p">:</span> <span class="s2">&quot;gshare&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rob_size&quot;</span><span class="p">:</span> <span class="mi">240</span><span class="p">,</span> <span class="s2">&quot;lq_size&quot;</span><span class="p">:</span> <span class="mi">70</span><span class="p">,</span>
            <span class="s2">&quot;L1D&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;prefetcher&quot;</span><span class="p">:</span> <span class="s2">&quot;no&quot;</span> <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Each cache object can also be specified in a list under the <code class="docutils literal notranslate"><span class="pre">caches</span></code> key.
These caches can then be referred to by their <code class="docutils literal notranslate"><span class="pre">name</span></code> key.
In the following configuration, each core has a distinct L1 cache.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;num_cores&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;ooo_cpu&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="s2">&quot;L1D&quot;</span><span class="p">:</span> <span class="s2">&quot;cacheA&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="s2">&quot;L1D&quot;</span><span class="p">:</span> <span class="s2">&quot;cacheB&quot;</span> <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;caches&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;cacheA&quot;</span><span class="p">,</span> <span class="s2">&quot;replacement&quot;</span><span class="p">:</span> <span class="s2">&quot;lru&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;cacheB&quot;</span><span class="p">,</span> <span class="s2">&quot;replacement&quot;</span><span class="p">:</span> <span class="s2">&quot;srrip&quot;</span> <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The configuration script will make every attempt to assign defaults to objects, but it may not be able to do so for.
In the following configuration, cores 0 and 1 are attached to <code class="docutils literal notranslate"><span class="pre">llcA</span></code> and cores 2 and 3 are attached to <code class="docutils literal notranslate"><span class="pre">llcB</span></code>.
The script is able to assign LLC-like defaults to each of the caches specified under <code class="docutils literal notranslate"><span class="pre">&quot;caches&quot;</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;num_cores&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s2">&quot;ooo_cpu&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="s2">&quot;L2C&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;lower_level&quot;</span><span class="p">:</span> <span class="s2">&quot;llcA&quot;</span><span class="p">}</span> <span class="p">},</span>
        <span class="p">{</span> <span class="s2">&quot;L2C&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;lower_level&quot;</span><span class="p">:</span> <span class="s2">&quot;llcB&quot;</span><span class="p">}</span> <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;caches&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;llcA&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;llcB&quot;</span> <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>However, in the following, the script will not be able to assign defaults to all caches, and you may need to specify additional parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;num_cores&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="s2">&quot;ooo_cpu&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="s2">&quot;L2C&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;lower_level&quot;</span><span class="p">:</span> <span class="s2">&quot;llcA&quot;</span><span class="p">}</span> <span class="p">},</span>
        <span class="p">{</span> <span class="s2">&quot;L2C&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;lower_level&quot;</span><span class="p">:</span> <span class="s2">&quot;llcB&quot;</span><span class="p">}</span> <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;caches&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;llcA&quot;</span><span class="p">,</span> <span class="s2">&quot;lower_level&quot;</span><span class="p">:</span> <span class="s2">&quot;L4C&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;llcB&quot;</span><span class="p">,</span> <span class="s2">&quot;lower_level&quot;</span><span class="p">:</span> <span class="s2">&quot;L4C&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;L4C&quot;</span> <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Creating a Configuration File</a><ul>
<li><a class="reference internal" href="#your-first-configuration-file">Your first configuration file</a></li>
<li><a class="reference internal" href="#cache-configuration">Cache Configuration</a></li>
<li><a class="reference internal" href="#multi-core-configurations">Multi-core configurations</a></li>
<li><a class="reference internal" href="#heterogeneous-systems">Heterogeneous systems</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="Module-support-library.html"
                          title="previous chapter">Module Support Library</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="Configuration-API.html"
                          title="next chapter">Configuration API</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/Creating-a-configuration-file.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div><div role="note">
  <h3> This page on other branches</h3>
  <h4>Branches</h4>
  <ul>
      
        <li><a href="../../master/index.html">master</a></li>
      
      
        <li><a href="../../develop/index.html">develop</a></li>
      
      
        <li><strong>feature/runtime_config2</strong></li>
      
  </ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Configuration-API.html" title="Configuration API"
             >next</a> |</li>
        <li class="right" >
          <a href="Module-support-library.html" title="Module Support Library"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ChampSim  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Creating a Configuration File</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2023, The ChampSim Contributors.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>